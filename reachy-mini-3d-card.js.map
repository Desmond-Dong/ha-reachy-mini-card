{"version":3,"file":"reachy-mini-3d-card.js","sources":["src/reachy-mini-3d-card.js"],"sourcesContent":["// Reachy Mini 3D Card for Home Assistant\n// Â∏¶ÊúâÂèØËßÜÂåñÈÖçÁΩÆÁºñËæëÂô®ÁöÑÂÆåÊï¥ÁâàÊú¨\n// ÊîØÊåÅ HACS ÂÆâË£Ö\n\n(async () => {\n  const MODULE_URL = new URL(import.meta.url);\n  const BASE_URL = MODULE_URL.origin + MODULE_URL.pathname.replace(/\\/[^/]*$/, '/');\n\n  // ‰ªé CDN ÊàñÊú¨Âú∞Âä†ËΩΩ Three.js\n  await loadScript('https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js');\n  await loadScript('https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js');\n  await loadScript('https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/loaders/STLLoader.js');\n\n  // LitElement Âíå Home Assistant Â∏ÆÂä©ÂáΩÊï∞\n  const { LitElement, html, css } = await loadLit();\n\n  class ReachyMini3DCard extends LitElement {\n    static get properties() {\n      return {\n        hass: Object,\n        config: Object,\n        _editing: { type: Boolean, state: true }\n      };\n    }\n\n    static get styles() {\n      return css`\n        :host {\n          display: block;\n          width: 100%;\n          position: relative;\n        }\n        ha-card {\n          overflow: hidden;\n          border-radius: var(--ha-card-border-radius, 12px);\n          box-shadow: var(--ha-card-box-shadow, none);\n        }\n        .card-container {\n          width: 100%;\n          position: relative;\n        }\n        #canvas-container {\n          width: 100%;\n          height: 400px;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          position: relative;\n        }\n        .status-overlay {\n          position: absolute;\n          top: 10px;\n          left: 10px;\n          background: rgba(0,0,0,0.6);\n          color: white;\n          padding: 8px 12px;\n          border-radius: 8px;\n          font-family: var(--font-family, Roboto);\n          font-size: 12px;\n          pointer-events: none;\n        }\n        .controls {\n          position: absolute;\n          bottom: 10px;\n          right: 10px;\n          display: flex;\n          gap: 8px;\n        }\n        .control-btn {\n          background: rgba(255,255,255,0.9);\n          border: none;\n          border-radius: 8px;\n          padding: 8px 12px;\n          cursor: pointer;\n          font-size: 20px;\n          transition: all 0.2s;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n        }\n        .control-btn:hover {\n          background: white;\n          transform: translateY(-2px);\n          box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n        }\n        .control-btn:active {\n          transform: translateY(0);\n        }\n        .edit-mode {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n          z-index: 100;\n        }\n        .edit-btn {\n          background: var(--primary-color, #03a9f4);\n          color: white;\n          border: none;\n          border-radius: 50%;\n          width: 40px;\n          height: 40px;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 20px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          transition: all 0.2s;\n        }\n        .edit-btn:hover {\n          background: var(--primary-color, #0288d1);\n          transform: scale(1.1);\n        }\n        .config-panel {\n          position: absolute;\n          top: 0;\n          right: 0;\n          width: 320px;\n          height: 100%;\n          background: white;\n          box-shadow: -4px 0 16px rgba(0,0,0,0.1);\n          border-radius: 12px 0 0 12px;\n          padding: 20px;\n          overflow-y: auto;\n          z-index: 1000;\n          transform: translateX(100%);\n          transition: transform 0.3s ease;\n        }\n        .config-panel.open {\n          transform: translateX(0);\n        }\n        .config-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n          padding-bottom: 10px;\n          border-bottom: 2px solid #f0f0f0;\n        }\n        .config-header h3 {\n          margin: 0;\n          color: #333;\n          font-size: 18px;\n        }\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n          color: #666;\n          padding: 0;\n          width: 30px;\n          height: 30px;\n        }\n        .close-btn:hover {\n          color: #333;\n        }\n        .config-item {\n          margin-bottom: 16px;\n        }\n        .config-item label {\n          display: block;\n          margin-bottom: 6px;\n          font-size: 13px;\n          color: #555;\n          font-weight: 500;\n        }\n        .config-item input[type=\"text\"],\n        .config-item input[type=\"number\"],\n        .config-item select {\n          width: 100%;\n          padding: 8px 12px;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          font-size: 14px;\n          box-sizing: border-box;\n          transition: border-color 0.2s;\n        }\n        .config-item input:focus,\n        .config-item select:focus {\n          outline: none;\n          border-color: var(--primary-color, #03a9f4);\n          box-shadow: 0 0 0 3px rgba(3, 169, 244, 0.1);\n        }\n        .config-item ha-switch {\n          display: block;\n        }\n        .entity-selector {\n          position: relative;\n        }\n        .entity-selector input {\n          padding-right: 30px;\n        }\n        .entity-icon {\n          position: absolute;\n          right: 8px;\n          top: 50%;\n          transform: translateY(-50%);\n          color: #999;\n        }\n        .preset-buttons {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n          margin-bottom: 16px;\n        }\n        .preset-btn {\n          background: #f5f5f5;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          padding: 8px 12px;\n          cursor: pointer;\n          font-size: 12px;\n          transition: all 0.2s;\n        }\n        .preset-btn:hover {\n          background: var(--primary-color, #03a9f4);\n          color: white;\n          border-color: var(--primary-color, #03a9f4);\n        }\n        .loading-overlay {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(255,255,255,0.9);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 16px;\n          color: #666;\n          z-index: 50;\n        }\n      `;\n    }\n\n    static getStubConfig() {\n      return {\n        entity_prefix: 'reachy_mini',\n        height: 400,\n        show_controls: true,\n        auto_rotate: false,\n        xray_mode: false,\n        wireframe: false\n      };\n    }\n\n    setConfig(config) {\n      if (!config.entity_prefix) {\n        throw new Error('You need to define an entity prefix');\n      }\n      this.config = {\n        ...ReachyMini3DCard.getStubConfig(),\n        ...config\n      };\n    }\n\n    getCardSize() {\n      return Math.ceil(this.config.height / 50);\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this.initThreeJS();\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.cleanup();\n    }\n\n    async initThreeJS() {\n      const container = this.shadowRoot.getElementById('canvas-container');\n      if (!container) return;\n\n      // Âú∫ÊôØ\n      this.scene = new THREE.Scene();\n      this.scene.background = new THREE.Color(0xf0f0f0);\n\n      // Áõ∏Êú∫\n      const width = container.clientWidth;\n      const height = this.config.height || 400;\n      this.camera = new THREE.PerspectiveCamera(50, width / height, 0.01, 1000);\n      this.camera.position.set(0.3, 0.3, 0.5);\n\n      // Ê∏≤ÊüìÂô®\n      this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n      this.renderer.setSize(width, height);\n      this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n      this.renderer.shadowMap.enabled = true;\n      this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n      container.appendChild(this.renderer.domElement);\n\n      // ÊéßÂà∂Âô®\n      this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);\n      this.controls.enableDamping = true;\n      this.controls.dampingFactor = 0.05;\n      this.controls.minDistance = 0.2;\n      this.controls.maxDistance = 1;\n\n      // ÁÅØÂÖâ\n      const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);\n      this.scene.add(ambientLight);\n\n      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n      directionalLight.position.set(1, 1, 1);\n      directionalLight.castShadow = true;\n      this.scene.add(directionalLight);\n\n      // Âú∞Èù¢ÁΩëÊ†º\n      const gridHelper = new THREE.GridHelper(0.4, 20, 0x888888, 0xcccccc);\n      this.scene.add(gridHelper);\n\n      // Âä†ËΩΩÊú∫Âô®‰∫∫Ê®°Âûã\n      await this.loadRobotModel();\n\n      // ÂºÄÂßãÂä®ÁîªÂæ™ÁéØ\n      this.animate();\n\n      // ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ\n      window.addEventListener('resize', this.onWindowResize.bind(this));\n\n      // ÂêØÂä®Áä∂ÊÄÅÊõ¥Êñ∞\n      this.startStateUpdate();\n    }\n\n    async loadRobotModel() {\n      try {\n        // Âä®ÊÄÅÂØºÂÖ• urdf-loader\n        const URDFLoader = (await import('/hacsfiles/reachy-mini-3d-card/lib/urdf-loader.js')).default;\n\n        // HACS ÂÆâË£ÖÂêéÁöÑË∑ØÂæÑÁªìÊûÑÔºö\n        // /hacsfiles/reachy-mini-3d-card/reachy-mini-3d-card.js (ÂΩìÂâçÊñá‰ª∂)\n        // /hacsfiles/reachy-mini-3d-card/assets/reachy-mini.urdf\n        // /hacsfiles/reachy-mini-3d-card/assets/meshes/xxx.stl\n\n        // ÊûÑÈÄ† URDF Êñá‰ª∂Ë∑ØÂæÑ\n        const urdfPath = '/hacsfiles/reachy-mini-3d-card/assets/reachy-mini.urdf';\n\n        // ÂàõÂª∫ URDFLoader\n        const loader = new URDFLoader();\n\n        // ËÆæÁΩÆÂ∑•‰ΩúÁõÆÂΩïË∑ØÂæÑ (Áî®‰∫éËß£ÊûêÁõ∏ÂØπË∑ØÂæÑ)\n        loader.workingPath = '/hacsfiles/reachy-mini-3d-card/assets/';\n\n        // ËÆæÁΩÆËµÑÊ∫êË∑ØÂæÑÂâçÁºÄ\n        loader.pathPrefix = (path) => {\n          // URDF ‰∏≠ÁöÑË∑ØÂæÑÊòØ \"meshes/xxx.stl\"\n          // ËΩ¨Êç¢‰∏∫ÂÆåÊï¥Ë∑ØÂæÑ\n          return '/hacsfiles/reachy-mini-3d-card/assets/' + path;\n        };\n\n        // Âä†ËΩΩ URDF\n        this.robot = await loader.load(urdfPath);\n\n        // Â∞ÜÊú∫Âô®‰∫∫Ê∑ªÂä†Âà∞Âú∫ÊôØ\n        this.scene.add(this.robot);\n\n        // ËÆæÁΩÆÊú∫Âô®‰∫∫ÂàùÂßã‰ΩçÁΩÆ\n        this.robot.position.set(0, 0, 0);\n\n        // Â≠òÂÇ®ÂÖ≥ËäÇÂºïÁî®‰ª•‰æøÂêéÁª≠Êõ¥Êñ∞\n        this.joints = this.robot.joints;\n\n        console.log('Robot model loaded successfully:', this.robot);\n        console.log('Available joints:', Object.keys(this.robot.joints));\n\n      } catch (error) {\n        console.error('Failed to load URDF model:', error);\n\n        // ÈôçÁ∫ßÊñπÊ°àÔºöÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ\n        const errorDiv = document.createElement('div');\n        errorDiv.style.cssText = `\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          text-align: center;\n          color: #f44336;\n          padding: 20px;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        `;\n        errorDiv.innerHTML = `\n          <div style=\"font-size: 48px;\">‚ö†Ô∏è</div>\n          <div style=\"font-size: 16px; margin-top: 10px;\">\n            <strong>Ê®°ÂûãÂä†ËΩΩÂ§±Ë¥•</strong><br>\n            <small style=\"color: #666;\">${error.message}</small><br>\n            <small style=\"color: #999; font-size: 11px;\">ËØ∑Á°Æ‰øùÊñá‰ª∂Â∑≤Ê≠£Á°ÆÂÆâË£ÖÂà∞ HACS</small>\n          </div>\n        `;\n        this.shadowRoot.getElementById('canvas-container').appendChild(errorDiv);\n      }\n    }\n\n    startStateUpdate() {\n      // ÊØè 50ms Êõ¥Êñ∞‰∏ÄÊ¨° (20Hz)\n      this.updateInterval = setInterval(() => {\n        if (this.hass && this.robot) {\n          this.updateRobotState();\n        }\n      }, 50);\n    }\n\n    updateRobotState() {\n      if (!this.robot || !this.robot.joints) return;\n\n      const prefix = this.config.entity_prefix;\n\n      // ‰ªé Home Assistant ÂÆû‰ΩìËé∑ÂèñÁä∂ÊÄÅ\n      const getState = (entityType, entityName) => {\n        const entityId = `${entityType}.${prefix}_${entityName}`;\n        const state = this.hass.states[entityId];\n        return state ? parseFloat(state.state) : 0;\n      };\n\n      // Ëé∑ÂèñÂÖ≥ËäÇÊï∞ÊçÆ (‰ªé JSON sensor)\n      const headJointsState = this.hass.states[`sensor.${prefix}_head_joints`];\n      const headPoseState = this.hass.states[`sensor.${prefix}_head_pose`];\n\n      if (headJointsState && headJointsState.state !== 'unknown') {\n        try {\n          const headJoints = JSON.parse(headJointsState.state);\n\n          // Stewart platform ÂÖ≥ËäÇ (ÂèÇËÄÉ desktop app ÁöÑÊò†Â∞Ñ)\n          this.robot.setJointValue('yaw_body', headJoints[0] || 0);\n          this.robot.setJointValue('stewart_1', headJoints[1] || 0);\n          this.robot.setJointValue('stewart_2', headJoints[2] || 0);\n          this.robot.setJointValue('stewart_3', headJoints[3] || 0);\n          this.robot.setJointValue('stewart_4', headJoints[4] || 0);\n          this.robot.setJointValue('stewart_5', headJoints[5] || 0);\n          this.robot.setJointValue('stewart_6', headJoints[6] || 0);\n\n        } catch (e) {\n          console.warn('Failed to parse head_joints:', e);\n        }\n      }\n\n      // Ëé∑ÂèñÂ§©Á∫øËßíÂ∫¶\n      const antennaLeft = getState('number', 'antenna_left');\n      const antennaRight = getState('number', 'antenna_right');\n\n      // Â§©Á∫øÊò†Â∞Ñ (Ê≥®ÊÑèÔºöËßíÂ∫¶ÂèØËÉΩÈúÄË¶ÅÂèçËΩ¨ÔºåÂèÇËÄÉ desktop app)\n      this.robot.setJointValue('left_antenna', -antennaLeft);\n      this.robot.setJointValue('right_antenna', -antennaRight);\n    }\n\n    animate() {\n      if (!this.renderer) return;\n\n      requestAnimationFrame(this.animate.bind(this));\n\n      if (this.controls) {\n        this.controls.update();\n      }\n\n      if (this.config.auto_rotate && this.robot) {\n        this.robot.rotation.y += 0.005;\n      }\n\n      if (this.renderer && this.scene && this.camera) {\n        this.renderer.render(this.scene, this.camera);\n      }\n    }\n\n    onWindowResize() {\n      if (!this.camera || !this.renderer) return;\n\n      const container = this.shadowRoot.getElementById('canvas-container');\n      if (!container) return;\n\n      const width = container.clientWidth;\n      const height = this.config.height || 400;\n\n      this.camera.aspect = width / height;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(width, height);\n    }\n\n    cleanup() {\n      if (this.updateInterval) {\n        clearInterval(this.updateInterval);\n      }\n      window.removeEventListener('resize', this.onWindowResize.bind(this));\n      if (this.renderer) {\n        this.renderer.dispose();\n      }\n    }\n\n    showError(message) {\n      const container = this.shadowRoot.getElementById('canvas-container');\n      if (container) {\n        container.innerHTML = `<div style=\"display:flex;align-items:center;justify-content:center;height:100%;color:#f44336;font-size:14px;\">${message}</div>`;\n      }\n    }\n\n    // ÈÖçÁΩÆÁõ∏ÂÖ≥ÊñπÊ≥ï\n    toggleEditMode() {\n      this._editing = !this._editing;\n    }\n\n    updateConfig(newConfig) {\n      this.config = { ...this.config, ...newConfig };\n      this.dispatchEvent(new CustomEvent('config-changed', {\n        detail: { config: this.config },\n        bubbles: true\n      }));\n    }\n\n    render() {\n      return html`\n        <ha-card>\n          <div class=\"card-container\">\n            ${this._editing ? html`\n              <div class=\"config-panel open\">\n                <div class=\"config-header\">\n                  <h3>‚öôÔ∏è Card Configuration</h3>\n                  <button class=\"close-btn\" @click=\"${() => this.toggleEditMode()}\">√ó</button>\n                </div>\n\n                <div class=\"preset-buttons\">\n                  <button class=\"preset-btn\" @click=\"${() => this.applyPreset('default')}\">üè† Default</button>\n                  <button class=\"preset-btn\" @click=\"${() => this.applyPreset('compact')}\">üì± Compact</button>\n                  <button class=\"preset-btn\" @click=\"${() => this.applyPreset('detailed')}\">üìä Detailed</button>\n                  <button class=\"preset-btn\" @click=\"${() => this.applyPreset('minimal')}\">‚ú® Minimal</button>\n                </div>\n\n                <div class=\"config-item\">\n                  <label>Entity Prefix</label>\n                  <div class=\"entity-selector\">\n                    <input type=\"text\"\n                           .value=\"${this.config.entity_prefix}\"\n                           @change=\"${(e) => this.updateConfig({ entity_prefix: e.target.value })}\">\n                    <span class=\"entity-icon\">üîó</span>\n                  </div>\n                </div>\n\n                <div class=\"config-item\">\n                  <label>Height (${this.config.height}px)</label>\n                  <input type=\"range\"\n                         min=\"200\"\n                         max=\"800\"\n                         step=\"50\"\n                         .value=\"${this.config.height}\"\n                         @input=\"${(e) => this.updateConfig({ height: parseInt(e.target.value) })}\">\n                </div>\n\n                <div class=\"config-item\">\n                  <label>Options</label>\n                  <label style=\"display:flex;align-items:center;gap:8px;margin-bottom:8px;\">\n                    <input type=\"checkbox\"\n                           ?checked=\"${this.config.show_controls}\"\n                           @change=\"${(e) => this.updateConfig({ show_controls: e.target.checked })}\">\n                    Show Controls\n                  </label>\n                  <label style=\"display:flex;align-items:center;gap:8px;margin-bottom:8px;\">\n                    <input type=\"checkbox\"\n                           ?checked=\"${this.config.auto_rotate}\"\n                           @change=\"${(e) => this.updateConfig({ auto_rotate: e.target.checked })}\">\n                    Auto Rotate\n                  </label>\n                  <label style=\"display:flex;align-items:center;gap:8px;\">\n                    <input type=\"checkbox\"\n                           ?checked=\"${this.config.xray_mode}\"\n                           @change=\"${(e) => this.updateConfig({ xray_mode: e.target.checked })}\">\n                    X-Ray Mode\n                  </label>\n                </div>\n              </div>\n            ` : ''}\n\n            <div id=\"canvas-container\" style=\"height:${this.config.height}px\"></div>\n\n            ${this.config.show_controls ? html`\n              <div class=\"controls\">\n                <button class=\"control-btn\" @click=\"${() => this.resetCamera()}\" title=\"Reset View\">üéØ</button>\n                <button class=\"control-btn\" @click=\"${() => this.toggleAutoRotate()}\" title=\"Toggle Rotation\">üîÑ</button>\n              </div>\n            ` : ''}\n\n            <div class=\"edit-mode\">\n              <button class=\"edit-btn\" @click=\"${() => this.toggleEditMode()}\" title=\"Edit Configuration\">‚öôÔ∏è</button>\n            </div>\n          </div>\n        </ha-card>\n      `;\n    }\n\n    resetCamera() {\n      if (this.camera && this.controls) {\n        this.camera.position.set(0.3, 0.3, 0.5);\n        this.controls.reset();\n      }\n    }\n\n    toggleAutoRotate() {\n      this.updateConfig({ auto_rotate: !this.config.auto_rotate });\n    }\n\n    applyPreset(preset) {\n      const presets = {\n        default: { height: 400, show_controls: true, auto_rotate: false },\n        compact: { height: 300, show_controls: false, auto_rotate: true },\n        detailed: { height: 600, show_controls: true, auto_rotate: false, xray_mode: true },\n        minimal: { height: 250, show_controls: false, auto_rotate: false }\n      };\n      this.updateConfig(presets[preset] || presets.default);\n    }\n  }\n\n  // Ê≥®ÂÜåËá™ÂÆö‰πâÂç°Áâá\n  customElements.define('reachy-mini-3d-card', ReachyMini3DCard);\n\n  // ÈÖçÁΩÆÁºñËæëÂô®\n  window.customCards = window.customCards || [];\n  window.customCards.push({\n    type: 'reachy-mini-3d-card',\n    name: 'Reachy Mini 3D Card',\n    description: 'Real-time 3D visualization of Reachy Mini robot with visual configuration editor',\n    preview: true,\n    documentationURL: 'https://github.com/djhui5710/reachy_mini_ha_voice'\n  });\n\n  // ËæÖÂä©ÂáΩÊï∞\n  async function loadScript(url) {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = url;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  }\n\n  async function loadLit() {\n    if (window.LitElement) {\n      return { LitElement: window.LitElement, html: window.html, css: window.css };\n    }\n    await loadScript('https://cdn.jsdelivr.net/npm/lit@3.1.0/index.js');\n    await loadScript('https://cdn.jsdelivr.net/npm/lit@3.1.0/decorators.js');\n    await loadScript('https://cdn.jsdelivr.net/npm/lit@3.1.0/polyfill-support.js');\n\n    // Lit ÈúÄË¶Å polyfill\n    await loadScript('https://cdn.jsdelivr.net/npm/@lit/reactive-element@1.6.0/reactive-element.js');\n    await loadScript('https://cdn.jsdelivr.net/npm/lit@3.1.0/lit-element.js');\n\n    return {\n      LitElement: window.LitElement || window.LitElementElement,\n      html: window.html || ((strings, ...values) => ({ strings, values })),\n      css: window.css || ((strings, ...values) => strings.join(''))\n    };\n  }\n})();\n"],"names":["MODULE_URL","URL","origin","pathname","replace","loadScript","LitElement","html","css","async","window","LitElementElement","strings","values","join","loadLit","ReachyMini3DCard","properties","hass","Object","config","_editing","type","Boolean","state","styles","getStubConfig","entity_prefix","height","show_controls","auto_rotate","xray_mode","wireframe","setConfig","Error","this","getCardSize","Math","ceil","connectedCallback","super","initThreeJS","disconnectedCallback","cleanup","container","shadowRoot","getElementById","scene","THREE","Scene","background","Color","width","clientWidth","camera","PerspectiveCamera","position","set","renderer","WebGLRenderer","antialias","alpha","setSize","setPixelRatio","min","devicePixelRatio","shadowMap","enabled","PCFSoftShadowMap","appendChild","domElement","controls","OrbitControls","enableDamping","dampingFactor","minDistance","maxDistance","ambientLight","AmbientLight","add","directionalLight","DirectionalLight","castShadow","gridHelper","GridHelper","loadRobotModel","animate","addEventListener","onWindowResize","bind","startStateUpdate","URDFLoader","import","default","urdfPath","loader","workingPath","pathPrefix","path","robot","load","joints","console","log","keys","error","errorDiv","document","createElement","style","cssText","innerHTML","message","updateInterval","setInterval","updateRobotState","prefix","getState","entityType","entityName","entityId","states","parseFloat","headJointsState","headJoints","JSON","parse","setJointValue","e","warn","antennaLeft","antennaRight","requestAnimationFrame","update","rotation","y","render","aspect","updateProjectionMatrix","clearInterval","removeEventListener","dispose","showError","toggleEditMode","updateConfig","newConfig","dispatchEvent","CustomEvent","detail","bubbles","applyPreset","target","value","parseInt","checked","resetCamera","toggleAutoRotate","reset","preset","presets","compact","detailed","minimal","url","Promise","resolve","reject","script","src","onload","onerror","head","customElements","define","customCards","push","name","description","preview","documentationURL"],"mappings":"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"}