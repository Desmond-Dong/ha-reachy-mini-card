{"version":3,"file":"ha-reachy-mini-card.js","sources":["src/reachy-mini-3d-card.js"],"sourcesContent":["// Reachy Mini 3D Card - Direct Daemon Connection\n// Version: 2.0.0\n// https://github.com/Desmond-Dong/ha-reachy-mini-card\n\n(function () {\n  'use strict';\n\n  // 注册 custom card\nwindow.customCards = window.customCards || [];\nwindow.customCards.push({\n  type: 'reachy-mini-3d-card',\n  name: 'Reachy Mini 3D Card',\n  description: 'Real-time 3D visualization of Reachy Mini robot',\n  documentationURL: 'https://github.com/Desmond-Dong/ha-reachy-mini-card'\n});\n\nclass ReachyMini3DCard extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  static get getConfigElement() {\n    return document.createElement('reachy-mini-3d-card-editor');\n  }\n\n  static getStubConfig() {\n    return {\n      daemon_host: 'localhost',\n      daemon_port: 3333,\n      height: 400\n    };\n  }\n\n  setConfig(config) {\n    this._config = {\n      daemon_host: 'localhost',\n      daemon_port: 3333,\n      height: 400,\n      ...config\n    };\n  }\n\n  getCardSize() {\n    return this._config.height ? this._config.height / 50 : 8;\n  }\n\n  async connectedCallback() {\n    this.render();\n    await this.init();\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host { display: block; }\n        ha-card {\n          overflow: hidden;\n          border-radius: var(--ha-card-border-radius, 12px);\n          box-shadow: var(--ha-card-box-shadow, none);\n        }\n        #container {\n          position: relative;\n          width: 100%;\n          height: ${this._config.height}px;\n        }\n        #status {\n          position: absolute;\n          top: 10px;\n          left: 10px;\n          padding: 6px 12px;\n          border-radius: 20px;\n          font-size: 12px;\n          font-weight: 500;\n          color: white;\n          z-index: 10;\n        }\n        .connected { background: #4caf50; }\n        .connecting { background: #ff9800; }\n        .error { background: #f44336; }\n        .loading {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n      </style>\n      <ha-card>\n        <div id=\"container\">\n          <div id=\"status\" class=\"connecting\">Connecting...</div>\n          <div id=\"loading\" class=\"loading\">\n            <ha-circular-progress indeterminate></ha-circular-progress>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  async init() {\n    try {\n      // 加载依赖\n      await this.loadScripts();\n\n      // 初始化 Three.js\n      this.initThreeJS();\n\n      // 连接 WebSocket\n      this.connectWebSocket();\n\n      // 加载机器人模型\n      this.loadRobot();\n\n    } catch (err) {\n      console.error('Init error:', err);\n      this.showError(err.message);\n    }\n  }\n\n  async loadScripts() {\n    // Three.js 和 URDFLoader 会通过 ES module 动态导入\n    // 不需要预先加载任何脚本\n  }\n\n  async initThreeJS() {\n    const container = this.shadowRoot.querySelector('#container');\n    const canvas = document.createElement('canvas');\n    container.appendChild(canvas);\n\n    // 动态导入 Three.js 和依赖\n    const THREE = await import('https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js');\n    const { OrbitControls } = await import('https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js');\n\n    // 场景\n    this._scene = new THREE.Scene();\n    this._scene.background = new THREE.Color(0xf5f5f5);\n\n    // 相机\n    this._camera = new THREE.PerspectiveCamera(50, container.clientWidth / this._config.height, 0.01, 1000);\n    this._camera.position.set(0.3, 0.3, 0.5);\n\n    // 渲染器\n    this._renderer = new THREE.WebGLRenderer({ canvas, antialias: true });\n    this._renderer.setSize(container.clientWidth, this._config.height);\n    this._renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n\n    // 控制器\n    this._controls = new OrbitControls(this._camera, canvas);\n    this._controls.enableDamping = true;\n    this._controls.minDistance = 0.2;\n    this._controls.maxDistance = 1.0;\n\n    // 灯光\n    this._scene.add(new THREE.AmbientLight(0xffffff, 0.6));\n    const light = new THREE.DirectionalLight(0xffffff, 0.8);\n    light.position.set(1, 1, 1);\n    this._scene.add(light);\n\n    // 地面网格\n    this._scene.add(new THREE.GridHelper(0.4, 20, 0x888888, 0xcccccc));\n\n    // 动画循环\n    const animate = () => {\n      requestAnimationFrame(animate);\n      this._controls.update();\n      this._renderer.render(this._scene, this._camera);\n    };\n    animate();\n  }\n\n  async loadRobot() {\n    const basePath = this.getBasePath();\n    const { default: URDFLoader } = await import(`${basePath}lib/urdf-loader.js`);\n\n    const loader = new URDFLoader();\n    loader.workingPath = `${basePath}assets/`;\n\n    this._robot = await loader.load(`${basePath}assets/reachy-mini.urdf`);\n    this._scene.add(this._robot);\n\n    // 隐藏加载动画\n    const loading = this.shadowRoot.querySelector('#loading');\n    if (loading) loading.style.display = 'none';\n  }\n\n  getBasePath() {\n    const scripts = document.getElementsByTagName('script');\n    const src = scripts[scripts.length - 1]?.src || '';\n    return src ? src.substring(0, src.lastIndexOf('/') + 1) : '/hacsfiles/ha-reachy-mini-card/';\n  }\n\n  connectWebSocket() {\n    const { daemon_host, daemon_port } = this._config;\n    const url = `ws://${daemon_host}:${daemon_port}/api/state/ws/full?frequency=20&with_head_joints=true&with_antenna_positions=true`;\n\n    this._ws = new WebSocket(url);\n\n    this._ws.onopen = () => {\n      this.updateStatus('connected', 'Connected');\n    };\n\n    this._ws.onmessage = (e) => {\n      try {\n        const data = JSON.parse(e.data);\n        this.updateRobot(data);\n      } catch (err) {\n        console.error('Parse error:', err);\n      }\n    };\n\n    this._ws.onerror = () => this.updateStatus('error', 'Error');\n    this._ws.onclose = () => {\n      this.updateStatus('error', 'Disconnected');\n      setTimeout(() => this.connectWebSocket(), 3000);\n    };\n  }\n\n  updateRobot(data) {\n    if (!this._robot) return;\n\n    if (data.head_joints?.length === 7) {\n      const j = data.head_joints;\n      this._robot.setJointValue('yaw_body', j[0]);\n      this._robot.setJointValue('stewart_1', j[1]);\n      this._robot.setJointValue('stewart_2', j[2]);\n      this._robot.setJointValue('stewart_3', j[3]);\n      this._robot.setJointValue('stewart_4', j[4]);\n      this._robot.setJointValue('stewart_5', j[5]);\n      this._robot.setJointValue('stewart_6', j[6]);\n    }\n\n    if (data.antennas_position?.length === 2) {\n      this._robot.setJointValue('left_antenna', -data.antennas_position[0]);\n      this._robot.setJointValue('right_antenna', -data.antennas_position[1]);\n    }\n  }\n\n  updateStatus(state, msg) {\n    const el = this.shadowRoot.querySelector('#status');\n    if (el) {\n      el.className = state;\n      el.textContent = msg;\n    }\n  }\n\n  showError(msg) {\n    this.shadowRoot.querySelector('#container').innerHTML = `\n      <div style=\"padding: 20px; color: #f44336;\">Error: ${msg}</div>\n    `;\n  }\n\n  disconnectedCallback() {\n    if (this._ws) this._ws.close();\n    if (this._renderer) this._renderer.dispose();\n  }\n}\n\ncustomElements.define('reachy-mini-3d-card', ReachyMini3DCard);\n\n// 图形化配置编辑器\nclass ReachyMini3DCardEditor extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this.render();\n  }\n\n  render() {\n    const config = this._config || {};\n\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host { display: block; }\n        .form-row {\n          display: flex;\n          flex-direction: column;\n          margin-bottom: 12px;\n        }\n        label {\n          font-size: 14px;\n          font-weight: 500;\n          margin-bottom: 4px;\n          color: var(--primary-text-color);\n        }\n        input {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid var(--primary-color);\n          border-radius: 4px;\n          background: var(--card-background-color);\n          color: var(--primary-text-color);\n          box-sizing: border-box;\n        }\n        input:focus {\n          outline: none;\n          border-color: var(--accent-color);\n        }\n        .hint {\n          font-size: 12px;\n          color: var(--secondary-text-color);\n          margin-top: 4px;\n        }\n      </style>\n      <div class=\"form-row\">\n        <label for=\"host\">Daemon Host</label>\n        <input\n          id=\"host\"\n          type=\"text\"\n          value=\"${config.daemon_host || 'localhost'}\"\n          placeholder=\"localhost or IP address\"\n        />\n        <div class=\"hint\">Reachy Mini daemon hostname or IP address</div>\n      </div>\n      <div class=\"form-row\">\n        <label for=\"port\">Daemon Port</label>\n        <input\n          id=\"port\"\n          type=\"number\"\n          value=\"${config.daemon_port || 3333}\"\n          placeholder=\"3333\"\n        />\n        <div class=\"hint\">WebSocket port (default: 3333)</div>\n      </div>\n      <div class=\"form-row\">\n        <label for=\"height\">Card Height (px)</label>\n        <input\n          id=\"height\"\n          type=\"number\"\n          value=\"${config.height || 400}\"\n          placeholder=\"400\"\n        />\n        <div class=\"hint\">Height of the card in pixels</div>\n      </div>\n    `;\n\n    // 监听输入变化\n    this.shadowRoot.getElementById('host').addEventListener('change', (e) => {\n      this._config = { ...this._config, daemon_host: e.target.value };\n      this.dispatchConfig();\n    });\n\n    this.shadowRoot.getElementById('port').addEventListener('change', (e) => {\n      this._config = { ...this._config, daemon_port: parseInt(e.target.value) };\n      this.dispatchConfig();\n    });\n\n    this.shadowRoot.getElementById('height').addEventListener('change', (e) => {\n      this._config = { ...this._config, height: parseInt(e.target.value) };\n      this.dispatchConfig();\n    });\n  }\n\n  dispatchConfig() {\n    const event = new CustomEvent('config-changed', {\n      detail: { config: this._config },\n      bubbles: true,\n      composed: true\n    });\n    this.dispatchEvent(event);\n  }\n}\n\ncustomElements.define('reachy-mini-3d-card-editor', ReachyMini3DCardEditor);\n\n})();\n"],"names":[],"mappings":"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"}